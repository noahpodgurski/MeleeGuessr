// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

datasource db {
  provider = "mongodb"
  url      = "mongodb+srv://user:dfsdfasdfasdfvzxczxvcw@cluster0.p6una.mongodb.net/MeleeGuessr?retryWrites=true&w=majority"
}

model users {
  id    String @id @default(auto()) @map("_id") @db.ObjectId
  email String @unique
  username String
  password String
}

enum Character {
  DrMario
  Mario
  Luigi
  Bowser
  Peach
  Yoshi
  DK
  Falcon
  Ganondorf
  Falco
  Fox
  Ness
  IC
  Kirby
  Samus
  Zelda
  Sheik
  Link
  YLink
  Pichu
  Pikachu
  Jigglypuff
  Mewtwo
  GAW
  Marth
  Roy
}

//dont need to store in DB - can just store clips.json on server prob
model Clip {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  clipSrc String @unique
  player String
  character Character
  slp String?
  oppPlayer String
  oppChar Character
}

model Stat {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  userId String @unique @db.ObjectId
  username String
  correct Int
  incorrect Int
  highScore Int
  games Int
}

model Session {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  userId String? @unique @db.ObjectId
  // todo add createdon
  correct Int
  incorrect Int
  currentClip String // find currentClip in clips.json to match to correct answer
  answer String
  startFrame Int
  portToGuess Int
}